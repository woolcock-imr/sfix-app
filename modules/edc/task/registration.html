<div id=page__ID>
	<div id=panel__ID class="container-fluid" style='max-width:1000px'>
		<div class="text-center">
		<img src="__CURRENT_PATH__/home.html.crc.png" class="" alt="CRC Alertness Safety and Productivity" style="width:250px">&nbsp;&nbsp;&nbsp;&nbsp;
		<img src="__CURRENT_PATH__/Usyd_new_logo.png" class="" alt="Sydney University" style="width:150px">&nbsp;&nbsp;&nbsp;&nbsp;
		<img src="__CURRENT_PATH__/home.html.woolcock.gif" class="" alt="Woolcock Intitute of Medical Research"style="width:300px"><br><br>
	</div>
</div>
<script>
/*    function F__ID(){
        //----------------------------------------
        var prefix=$vm.module_list[$vm.vm['__ID'].name].prefix; if(prefix==undefined) prefix="";
		//----------------------------------------
		$('#PSQI1__ID').change(function(){
			if(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/.test($('#PSQI1__ID').val())==false) $('#bedtime__ID').show();
			else  $('#bedtime__ID').hide();
		})
		$('#PSQI2__ID').change(function(){
			if(/^(\d{1,3})$/.test($('#PSQI2__ID').val())==false) $('#sleeplat__ID').show();
			else  $('#sleeplat__ID').hide();
		})
		$('#PSQI3__ID').change(function(){
			if(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/.test($('#PSQI3__ID').val())==false) $('#getup__ID').show();
			else  $('#getup__ID').hide();
		})
		$('#PSQI4__ID').change(function(){
			if(/^(\d{1,2}(\.\d{1})?)$/.test($('#PSQI4__ID').val())==false) $('#sleep__ID').show();
			else  $('#sleep__ID').hide();
		})

		$('#PSQI5j__ID').change(function(){
			if($('#PSQI5j__ID').val()=='') $('#PSQI5ji__ID').prop('required',false);
			else $('#PSQI5ji__ID').prop('required',true);
		})

		$("#F_03__ID input[name='PSQI10']").click(function(){
			var ip=$('input:radio[name=PSQI10]:checked').val();
			if(ip=="2" || ip=="3"){
				$("#F_03__ID input[name='PSQI10a']").prop('disabled',false).prop('required',true);
				$("#F_03__ID input[name='PSQI10b']").prop('disabled',false).prop('required',true);
				$("#F_03__ID input[name='PSQI10c']").prop('disabled',false).prop('required',true);
				$("#F_03__ID input[name='PSQI10d']").prop('disabled',false).prop('required',true);
				$("#PSQI10e__ID").prop('disabled',false)
				$("#F__ID input[name='PSQI10ei']").prop('disabled',false)
			}
			else{
				$("#F_03__ID input[name='PSQI10a']").prop('disabled',true).prop('required',false);
				$("#F_03__ID input[name='PSQI10b']").prop('disabled',true).prop('required',false);
				$("#F_03__ID input[name='PSQI10c']").prop('disabled',true).prop('required',false);
				$("#F_03__ID input[name='PSQI10d']").prop('disabled',true).prop('required',false);
				$("#PSQI10e__ID").prop('disabled',true)
				$("#F_03__ID input[name='PSQI10ei']").prop('disabled',true)
			}
		})

		$('#PSQI10e__ID').change(function(){
			if($('#PSQI10e__ID').val()=='') $('#PSQI10ei__ID').prop('required',false);
			else $('#PSQI10ei__ID').prop('required',true);
		})
        //----------------------------------------
        $('#D__ID').on('load',function(){
            $('#F_01__ID').show();
            $('#F_02__ID').hide();
            $('#F_03__ID').hide();
        })
        //-------------------------------------
        $('#F_01__ID').submit(function(event){
			event.preventDefault();
            $('#F_01__ID').hide();
            $('#F_02__ID').show();
            $('#F_03__ID').hide();
		})
        //--------------------------------------------------------
        $('#f2_p__ID').on('click',function(event){
			event.preventDefault();
            $('#F_01__ID').show();
            $('#F_02__ID').hide();
            $('#F_03__ID').hide();
		})
        //--------------------------------------------------------
        $('#F_02__ID').submit(function(event){
			event.preventDefault();
            $('#F_01__ID').hide();
            $('#F_02__ID').hide();
            $('#F_03__ID').show();
		})
        //--------------------------------------------------------
        $('#f3_p__ID').on('click',function(event){
			event.preventDefault();
            $('#F_01__ID').hide();
            $('#F_02__ID').show();
            $('#F_03__ID').hide();
		})
        //--------------------------------------------------------
        $('#F_03__ID').submit(function(event){
			event.preventDefault();
            $('#submit__ID').hide();


            var record={};
            var a=$("#F_01__ID").serializeArray(); $.each(a, function () { record[this.name]=this.value || '';});
            a=$("#F_02__ID").serializeArray(); $.each(a, function () { record[this.name]=this.value || '';});
            a=$("#F_03__ID").serializeArray(); $.each(a, function () { record[this.name]=this.value || '';});


            //-------------
            // calculation
			var vpsqi1=0;
            var v4=parseFloat(record.PSQI4);
            if(v4>=7) vpsqi1=0;
            if(v4<7 && v4>=6) vpsqi1=1;
            if(v4<6 && v4>=5) vpsqi1=2;
            if(v4<5) vpsqi1=3;
            record.PSQIDURAT=vpsqi1.toString();
            var pqsi5j="0";
    		if(record.PSQI5j=='') pqsi5j="0"; else pqsi5j=record.PSQI5ji;
    		var vpsqi2=parseInt(record.PSQI5b)+parseInt(record.PSQI5c)+parseInt(record.PSQI5d)+parseInt(record.PSQI5e)+parseInt(record.PSQI5f)+parseInt(record.PSQI5g)+parseInt(record.PSQI5h)+parseInt(record.PSQI5i)+parseInt(pqsi5j);
            if(vpsqi2==0) record.PSQIDISTB="0";
    		if(vpsqi2>=1 && vpsqi2<=9) record.PSQIDISTB="1";
    		if(vpsqi2>9 && vpsqi2<=18) record.PSQIDISTB="2";
    		if(vpsqi2>18) record.PSQIDISTB="3";

            var vpsqi3=0;
            var v2=parseInt(record.PSQI2)
    		if(v2>=0 && v2<=15) vpsqi3=0;
    		if(v2>15 && v2<=30) vpsqi3=1;
    		if(v2>30 && v2<=60) vpsqi3=2;
    		if(v2>60) vpsqi3=3;
            var v5i=parseInt(record.PSQI5a)
    		if((vpsqi3+v5i)==0) record.PSQILATEN="0";
    		if((vpsqi3+v5i)>=1 && (vpsqi3+v5i)<=2) record.PSQILATEN="1";
    		if((vpsqi3+v5i)>=3 && (vpsqi3+v5i)<=4) record.PSQILATEN="2";
    		if((vpsqi3+v5i)>=5 && (vpsqi3+v5i)<=6) record.PSQILATEN="3";

            var v18i=parseInt(record.PSQI8)
            var v19i=parseInt(record.PSQI9)
    		if((v18i+v19i)==0) record.PSQIDAYDYS="0";
    		if((v18i+v19i)>=1 && (v18i+v19i)<=2) record.PSQIDAYDYS="1";
    		if((v18i+v19i)>=3 && (v18i+v19i)<=4) record.PSQIDAYDYS="2";
    		if((v18i+v19i)>=5 && (v18i+v19i)<=6) record.PSQIDAYDYS="3";

            var startTime = record.PSQI1;
            var endTime = record.PSQI3;

            var startTimeArray = startTime.split(":");
            var startInputHrs = parseInt(startTimeArray[0]);
            var startInputMins = parseInt(startTimeArray[1]);

            var endTimeArray = endTime.split(":");
            var endInputHrs = parseInt(endTimeArray[0]);
            var endInputMins = parseInt(endTimeArray[1]);

            var startMin = startInputHrs*60 + startInputMins;
            var endMin = endInputHrs*60 + endInputMins;

            var result;

            if (endMin < startMin) {
               var minutesPerDay = 24*60;
               result = minutesPerDay - startMin;  // Minutes till midnight
               result += endMin; // Minutes in the next day
            } else {
              result = endMin - startMin;
            }
            var v4=parseInt(record.PSQI4)*60*100;
            var vpsqi4=v4/result;
            if(vpsqi4>=85) record.PSQIHSE="0";
    		if(vpsqi4<85 && vpsqi4>=75) record.PSQIHSE="1";
    		if(vpsqi4<75 && vpsqi4>=65) record.PSQIHSE="2";
    		if(vpsqi4<65) record.PSQIHSE="3";
            record.PSQISLPQUAL=record.PSQI6;
    		record.PSQIMEDS=record.PSQI7;
            record.PSQI=(
                parseInt(record.PSQIDURAT)+
                parseInt(record.PSQIDISTB)+
                parseInt(record.PSQILATEN)+
                parseInt(record.PSQIDAYDYS)+
                parseInt(record.PSQIHSE)+
                parseInt(record.PSQISLPQUAL)+
                parseInt(record.PSQIMEDS)).toString();
			//-------------
			record.ISI=(parseInt(record.ISI_2)+parseInt(record.ISI_3)+parseInt(record.ISI_4)+parseInt(record.ISI_5)+parseInt(record.ISI_1a)+parseInt(record.ISI_1b)+parseInt(record.ISI_1c)).toString();
            record.ISI_1=(parseInt(record.ISI_1a)+parseInt(record.ISI_1b)+parseInt(record.ISI_1c)).toString();
			record.Include="No";
			// ...
			//alert(JSON.stringify(record))
            var thank='thanks-no';
            if(parseInt(record.PSQI)>5 && parseInt(record.ISI)>14) {
				thank='thanks-ok';
				record.Include="Yes";
			}
			//alert(parseInt(record.PSQI)+" - "+parseInt(record.ISI))
            //-------------
            var dbv={}
            var db_pid=$vm.module_list[$vm.vm["__ID"].name].table_id;
            var req={cmd:"add_json_record",db_pid:db_pid,data:record,dbv:dbv};
            $VmAPI.request({data:req,callback:function(res){
                if(res.ret<=0)	$vm.alert("Sorry there is a problem. You can try again later.")
                else{
                    $vm.nav_load_module(prefix+thank,'',{})
                }
            }});
		})
        //--------------------------------------------------------
    }
	*/
</script>
<style>
#D__ID{
	height:100%;
	overflow: auto;
	animation: vm_module_fadein 1.0s;
	background: rgba(151,164,181,0.95);
}
#form_container__ID{
	padding-top:50px;
	max-width: 800px;
	margin-left: auto;
	margin-right: auto;

	font-family: Verdana,sans-serif;
	font-size: 15px;
	line-height: 1.5;
	color: #000;
}
#form_container__ID .row__ID{
	padding:6px 0;
}
#form_container__ID .row__ID:hover{
	/*background-color: #727b84;*/
}
#header__ID{
	background-color:#727b84;
	color:#000;
	padding:10px 15px 10px 15px;
	font-size:150%;
}
#quest__ID{
	padding:5px 5px 5px 5px;
	font-size:120%;
}
#F__ID{
	border:1px solid #000;
	padding:6px 15px 20px 15px;
}
#F__ID label
	display: inline-block;
	margin: .6rem 0 .3rem 0;
}

#F__ID fieldset {
	border: 0px solid #c0c0c0;
	margin: 0;
	padding: 0;
}
@media screen and (max-width:768px){
	#form_container__ID{
		padding:20px 10px 50px 10px;
	}
}
.control {
	font-family: arial;
	/*display: block;*/
	position: relative;
	padding-left: 30px;
   /* margin-bottom: 20px;*/
	padding-top: 3px;
	cursor: pointer;
	font-size: 16px;
}
.control input {
		position: absolute;
		z-index: -1;
		opacity: 0;
	}
.control_indicator {
	position: absolute;
	top: 2px;
	left: 0;
	height: 20px;
	width: 20px;
	background: #e6e6e6;
	border: 0px solid #000000;
}
.control-radio .control_indicator {
	border-radius: 50%;
}

.control:hover input ~ .control_indicator,
.control input:focus ~ .control_indicator {
	background: #cccccc;
}

.control input:checked ~ .control_indicator {
	background: #A51C3D;
}
.control:hover input:not([disabled]):checked ~ .control_indicator,
.control input:checked:focus ~ .control_indicator {
	background: #0e6647d;
}
.control input:disabled ~ .control_indicator {
	background: #e6e6e6;
	opacity: 0.6;
	pointer-events: none;
}
.control_indicator:after {
	box-sizing: unset;
	content: '';
	position: absolute;
	display: none;
}
.control input:checked ~ .control_indicator:after {
	display: block;
}
.control-radio .control_indicator:after {
	left: 7px;
	top: 7px;
	height: 0px;
	width: 0px;
	border-radius: 50%;
	background: #ffffff;
}
.control-radio input:disabled ~ .control_indicator:after {
	background: #7b7b7b;
}
</style>
